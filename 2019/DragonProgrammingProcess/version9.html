<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="keywords" content="Aoki,Atsushi,Smalltalk,Smalltalker,Program,Programmer,Object,Oriented,Programming">
<meta name="description" content="青木淳（あおきあつし）のホームページ">
<meta name="author" content="AOKI Atsushi">
<link rev="made" href="mailto:atsushi@cc.kyoto-su.ac.jp">
<link rel="index" href="index-j.html">
<link rel="shortcut icon" href="http://www.cc.kyoto-su.ac.jp/~atsushi/icons/aoki.ico">
<style type="text/css">
<!--
body {
  background-color : #ffffff;
  margin : 20px;
  padding : 10px;
  font-family : serif;
  font-size : 10pt;
}
a {
  text-decoration : underline;
  color : #000000;
}
a:link {
  background-color : #ffddbb;
}
a:visited {
  background-color : #ccffcc;
}
a:hover {
  background-color : #dddddd;
}
a:active {
  background-color : #dddddd;
}
div.belt {
  background-color : #eeeeee;
  padding : 0px 4px;
}
div.belt-yellow {
  background-color : #ffffcc;
  padding : 0px 4px;
}
div.belt-blue {
  background-color : #ddeeff;
  padding : 0px 4px;
}
div.belt-pink {
  background-color : #ffeedd;
  padding : 0px 4px;
}
div.right-small {
  text-align : right;
  font-size : 8pt;
}
img.border {
  border-width : 1px;
  border-color : #000000;
  vertical-align : middle;
}
img.borderless {
  border-width : 0px;
  vertical-align : middle;
}
p.belt {
  background-color : #ffeedd;
  padding : 4px 8px;
}
p.belt-blue {
  background-color : #ddeeff;
  padding : 4px 8px;
}
pre.belt {
  background-color : #ddeeff;
  padding : 4px 8px;
}
pre.belt-yellow {
  background-color : #ffffcc;
  padding : 4px 8px;
}
table {
  border-style : solid;
  border-width : 0px;
  border-color : #000000;
  font-family : serif;
  font-size : 10pt;
}
table.profile {
  border-style : solid;
  border-width : 0px;
  border-color : #000000;
  font-family : serif;
  font-size : 10pt;
  margin-top : 8px;
  margin-left : 8px;
  margin-right : 8px;
  margin-bottom : 8px;
}
table.belt {
  border-style : solid;
  border-width : 0px;
  border-color : #000000;
  background-color : #ffeedd;
  padding : 0px 0px;
  width : 100%;
}
table.content {
  border-style : solid;
  border-width : 0px;
  border-color : #000000;
  padding : 2px 4px;
}
table.font-fixed {
  border-style : solid;
  border-width : 0px;
  border-color : #000000;
  padding : 2px 4px;
  font-family : monospace;
}
table.nest {
  border-style : solid;
  border-width : 0px;
  border-color : #000000;
  padding : 0px 0px;
}
td {
  padding : 0px 0px;
  vertical-align : middle;
}
td.center {
  text-align : center;
}
td.center-half {
  text-align : center;
  width : 50%;
  font-size : 8pt;
}
td.center-small {
  text-align : center;
  font-size : 8pt;
  padding : 0px 4px;
}
td.center-small-nopadding {
  text-align : center;
  font-size : 8pt;
  padding : 0px 0px;
}
td.center-white {
  text-align : center;
  background-color : #ffffff;
}
td.center-small-white {
  text-align : center;
  font-size : 8pt;
  background-color : #ffffff;
}
td.center-border1 {
  text-align : center;
  vertical-align : middle;
  empty-cells : show;
  border-style : solid;
  border-width : 1px;
  border-color : #ffc080;
  width : 22px;
  height : 22px;
}
td.left-small {
  text-align : left;
  font-size : 8pt;
  padding : 0px 4px;
}
td.left-small-white {
  text-align : left;
  font-size : 8pt;
  padding : 0px 4px;
  background-color : #ffffff;
}
td.right-small {
  text-align : right;
  font-size : 8pt;
  padding : 0px 4px;
}
td.right-small-white {
  text-align : right;
  font-size : 8pt;
  padding : 0px 4px;
  background-color : #ffffff;
}
th {
  padding : 0px 0px;
  vertical-align : middle;
}
#menu {
  margin: 0px 0px 0px 0px;
  padding: 0px;
  height: 32px;
}
#menu ul {
  margin: 0px;
  padding: 0px;
  list-style: none;
  text-align: center;
  clear: both;
}
#menu li {
  margin: 0px 5px 0px 0px;
  padding: 0px;
  float: left;
}
#menu a {
  display: block;
  padding: 2px 4px;
  text-decoration: none;
  margin: 0px;
  font-weight: bold;
  background: #FFFFFF;
  color: #333333;
  border: 1px solid #666666;
}
#menu a:hover {
  display: block;
  padding: 2px 4px;
  border-bottom: 1px solid #000000;
  text-decoration: none;
  background: #FFCC66;
}
#menu .current {
  background-color: #F45F57;
  font-weight: bold;
  color: #FFFFFF;
  border: 1px solid #333333;
}
-->
</style>
<!-- SyntaxHighlighter BEGIN -->
<link href="http://www.cc.kyoto-su.ac.jp/~atsushi/SyntaxHighlighter/styles/shCore.css" rel="stylesheet" type="text/css">
<link href="http://www.cc.kyoto-su.ac.jp/~atsushi/SyntaxHighlighter/styles/shThemeEclipse.css" rel="stylesheet" type="text/css">
<script src="http://www.cc.kyoto-su.ac.jp/~atsushi/SyntaxHighlighter/scripts/shCore.js" type="text/javascript"></script>
<script src="http://www.cc.kyoto-su.ac.jp/~atsushi/SyntaxHighlighter/scripts/shBrushJava.js" type="text/javascript"></script>
<script src="http://www.cc.kyoto-su.ac.jp/~atsushi/SyntaxHighlighter/scripts/shBrushPlain.js" type="text/javascript"></script>
<script src="http://www.cc.kyoto-su.ac.jp/~atsushi/SyntaxHighlighter/scripts/shBrushPython.js" type="text/javascript"></script>
<script type="text/javascript"> 
<!--
SyntaxHighlighter.config.bloggerMode = true;
SyntaxHighlighter.config.clipboardSwf = 'http://alexgorbatchev.com/pub/sh/current/scripts/clipboard.swf';
SyntaxHighlighter.all();
SyntaxHighlighter.defaults['auto-links'] = false;
-->
</script>
<!-- SyntaxHighlighter END -->
<title>Version 9：MVC4JOGLをパッケージ化（mvc4jogl*.jarとしてライブラリ化）し、それを使って再構成する</title>
</head>
<body>
<div id="menu">
<ul>
  <li><a href="../Lectures/index-j.html#DragonProgrammingProcess">Javaプログラム集</a></li>
  <li><a href="index-j.html">ドラゴンのプログラミング過程とリファクタリング過程</a></li>
  <li><a href="version0.html">0</a></li>
  <li><a href="version1.html">1</a></li>
  <li><a href="version2.html">2</a></li>
  <li><a href="version3.html">3</a></li>
  <li><a href="version4.html">4</a></li>
  <li><a href="version5.html">5</a></li>
  <li><a href="version6.html">6</a></li>
  <li><a href="version7.html">7</a></li>
  <li><a href="version8.html">8</a></li>
  <li><a href="version9.html" class="current">9</a></li>
</ul>
</div>
<hr>
<!--********************************************************************************************************************-->
<h2>Version 9：MVC4JOGLをパッケージ化（mvc4jogl*.jarとしてライブラリ化）し、それを使って再構成する</h2>
<p>描画オブジェクト階層（OpenGLObjectインヘリタンス）を導入し、プロジェクションオブジェクト（OpenGLProjection）を導入し、JOGL（OpenGL）のためのMVC（モデル・ビュー・コントローラ）を導入して、マウスからの入力とキーボードからの入力を受けつけ、回転や拡大縮小を行えるようにしました。一応、これでプログラムが完成しています。パッケージ「mvc4jogl」をjarファイルにまとめて「mvc4jogl.jar」にし、それをライブラリとして利用するように設え（しつらえ）ましょう。</p>
<ol>
  <li>パッケージのアーカイブ・ファイル「<a href="http://www.cc.kyoto-su.ac.jp/~atsushi/deployment/AP/Java/MVC4JOGL_JOGL_v2.4.tar.gz">MVC4JOGL_JOGL_v2.4.tar.gz</a>」の入手（ダウンロード）する</li>
  <li>入手したアーカイブ・ファイルを適当なディレクトリ（たとえば「~/Desktop」に）展開する
    <ul>
      <li><span style="font-size: xx-small;"><code><span style="color:#ff0000">(cd ~/Downloads/ ; curl -O http://www.cc.kyoto-su.ac.jp/~atsushi/deployment/AP/Java/MVC4JOGL_JOGL_v2.4.tar.gz)</span></code></span></li>
      <li><span style="font-size: xx-small;"><code><span style="color:#ff0000">(cd ~/Downloads/ ; cat ./MVC4JOGL_JOGL_v2.4.tar.gz ; rm -f ./MVC4JOGL_JOGL_v2.4.tar.gz)</span> | <span style="color:#0000ff">(cd ~/Desktop/ ; tar xvfz - ; xattr -cr ./MVC4JOGL_JOGL_v2.4)</span></code></span></li>
    </ul>
  </li>
  <li>その展開して得られたディレクトリ「MVC4JOGL_JOGL_v2.4/」に入り、その中で「make」を実行して、2つの「mvc4jogl*.jar」を生成する
    <ul>
      <li><span style="font-size: xx-small;"><code>(<span style="color:#ff0000">cd</span> <span style="color:#0000ff">~/Desktop/MVC4JOGL_JOGL_v2.4/</span> ; <span style="color:#ff0000">make</span>)</code></span></li>
    </ul>
  </li>
  <li>生成した2つのjarファイル「mvc4jogl*.jar」だけを、ドラゴン・プログラミング・プロセスのディレクトリに置く（コピーする）
    <ul>
      <li><span style="font-size: xx-small;"><code><span style="color:#ff0000">cp -p</span> <span style="color:#0000ff">~/Desktop/MVC4JOGL_JOGL_v2.4/mvc4jogl-natives-macosx-universal.jar</span> <span style="color:#ff00ff">~/AP/Java/DragonProgrammingProcess/Dragon_Programming_Process/</span></code></span></li>
      <li><span style="font-size: xx-small;"><code><span style="color:#ff0000">cp -p</span> <span style="color:#0000ff">~/Desktop/MVC4JOGL_JOGL_v2.4/mvc4jogl.jar</span> <span style="color:#ff00ff">~/AP/Java/DragonProgrammingProcess/Dragon_Programming_Process/</span></code></span></li>
    </ul>
  </li>
  <li>ドラゴン・プログラミング・プロセスのディレクトリにある「mvc4jogl/」のディレクトリを削除する（mvc4jogl*.jarファイルがあるから大丈夫）
    <ul>
      <li><span style="font-size: xx-small;"><code><span style="color:#ff0000">rm -r</span> <span style="color:#ff00ff">~/AP/Java/DragonProgrammingProcess/Dragon_Programming_Process/mvc4jogl/</span></code></span></li>
    </ul>
  </li>
  <li>ドラゴン・プログラミング・プロセスのディレクトリにある「gluegen-rt*.jar」と「jogl-all*.jar」の4ファイルを削除する（mvc4jogl*.jarファイルがあるから大丈夫）
    <ul>
      <li><span style="font-size: xx-small;"><code><span style="color:#ff0000">rm </span> <span style="color:#ff00ff">~/AP/Java/DragonProgrammingProcess/Dragon_Programming_Process/gluegen-rt-natives-macosx-universal.jar</span></code></span></li>
      <li><span style="font-size: xx-small;"><code><span style="color:#ff0000">rm </span> <span style="color:#ff00ff">~/AP/Java/DragonProgrammingProcess/Dragon_Programming_Process/gluegen-rt.jar</span></code></span></li>
      <li><span style="font-size: xx-small;"><code><span style="color:#ff0000">rm </span> <span style="color:#ff00ff">~/AP/Java/DragonProgrammingProcess/Dragon_Programming_Process/jogl-all-natives-macosx-universal.jar</span></code></span></li>
      <li><span style="font-size: xx-small;"><code><span style="color:#ff0000">rm </span> <span style="color:#ff00ff">~/AP/Java/DragonProgrammingProcess/Dragon_Programming_Process/jogl-all.jar</span></code></span></li>
    </ul>
  </li>
</ol>
<p>そして、Apache Antのビルドファイル「build.xml」を以下に示すものと同じになるように編集・加筆してください。編集するところをハイライトで表しておきます。これによって「mvc4jogl.jar」がクラスパスの中に入り、コンパイルやjarファイル生成そしてJavaDoc生成などもできるようになります。これで、jarファイルとして提供されている他のプログラムを利用して、新たなプログラムを作り出すことを学ぶことができました。</p>
<!--********************************************************************************************************************-->
<div class="belt">
<h3><a name="Differences">差分</a>（変更箇所：編集部分）</h3>
</div>
<!--********************************************************************************************************************-->
<blockquote>
<div class="belt-pink">
【前バージョンからの差分＝変更箇所】
</div>
<!-- python -c 'print(",".join([str(x) for x in range(0,0)]))' -->
<pre class="brush: plain; toolbar: false; first-line: 1; highlight: [];">
【ファイルやディレクトリの増減】
========================================
Compare:
./Version8
     1: dragon/Dragon.java
     2: dragon/Example.java
     3: mvc4jogl/OpenGLCompound.java
     4: mvc4jogl/OpenGLController.java
     5: mvc4jogl/OpenGLModel.java
     6: mvc4jogl/OpenGLObject.java
     7: mvc4jogl/OpenGLPolygon.java
     8: mvc4jogl/OpenGLProjection.java
     9: mvc4jogl/OpenGLTriangle.java
    10: mvc4jogl/OpenGLView.java
    11: mvc4jogl/Teapot.java
with:
./Version9
     1: dragon/Dragon.java
     2: dragon/Example.java
========================================
Added (or Removed) files:
3,11d2
&lt; mvc4jogl/OpenGLCompound.java
&lt; mvc4jogl/OpenGLController.java
&lt; mvc4jogl/OpenGLModel.java
&lt; mvc4jogl/OpenGLObject.java
&lt; mvc4jogl/OpenGLPolygon.java
&lt; mvc4jogl/OpenGLProjection.java
&lt; mvc4jogl/OpenGLTriangle.java
&lt; mvc4jogl/OpenGLView.java
&lt; mvc4jogl/Teapot.java
========================================
【それぞれのファイルの変更】
----------------------------------------
Compare:
./Version8/dragon/Dragon.java
with:
./Version9/dragon/Dragon.java
----------------------------------------
Result:
----------------------------------------
Compare:
./Version8/dragon/Example.java
with:
./Version9/dragon/Example.java
----------------------------------------
Result:
----------------------------------------
</pre>
<div class="belt-pink">
【前バージョンからの差分＝変更箇所】
</div>
<!-- python -c 'print(",".join([str(x) for x in range(0,0)]))' -->
<pre class="brush: plain; toolbar: false; first-line: 1; highlight: [];">
【ファイルやディレクトリの増減】
========================================
Compare:
./Version8
     1: PrepareJavaNativeInterfaceLibraries.sh
     2: build.xml
with:
./Version9
     1: PrepareJavaNativeInterfaceLibraries.sh
     2: build.xml
========================================
Added (or Removed) files:
========================================
【それぞれのファイルの変更】
----------------------------------------
Compare:
./Version8/PrepareJavaNativeInterfaceLibraries.sh
with:
./Version9/PrepareJavaNativeInterfaceLibraries.sh
----------------------------------------
Result:
11,12c11
&lt;     jar xvf gluegen-rt-natives-macosx-universal.jar
&lt;     jar xvf jogl-all-natives-macosx-universal.jar
---
&gt;     jar xvf mvc4jogl-natives-macosx-universal.jar
----------------------------------------
Compare:
./Version8/build.xml
with:
./Version9/build.xml
----------------------------------------
Result:
5a6
&gt;     &lt;property name="mvc4jogl" value="mvc4jogl" /&gt;
7c8
&lt;     &lt;property name="packagenames" value="${package},${utility}" /&gt;
---
&gt;     &lt;property name="packagenames" value="${package},${mvc4jogl},${utility}" /&gt;
38a40
&gt;                 &lt;pathelement location="${mvc4jogl}.jar" /&gt;
40,41d41
&lt;                 &lt;pathelement location="gluegen-rt.jar" /&gt;
&lt;                 &lt;pathelement location="jogl-all.jar" /&gt;
51a52
&gt;             &lt;zipfileset src="${mvc4jogl}.jar" /&gt;
53,54d53
&lt;             &lt;zipfileset src="gluegen-rt.jar" /&gt;
&lt;             &lt;zipfileset src="jogl-all.jar" /&gt;
58,59c57
&lt;             &lt;zipfileset src="gluegen-rt-natives-macosx-universal.jar" /&gt;
&lt;             &lt;zipfileset src="jogl-all-natives-macosx-universal.jar" /&gt;
---
&gt;             &lt;zipfileset src="mvc4jogl-natives-macosx-universal.jar" /&gt;
118a117
&gt;                 &lt;pathelement location="${mvc4jogl}.jar" /&gt;
120,121d118
&lt;                 &lt;pathelement location="gluegen-rt.jar" /&gt;
&lt;                 &lt;pathelement location="jogl-all.jar" /&gt;
----------------------------------------
</pre>
</blockquote>
<!--********************************************************************************************************************-->
<div class="belt">
<h3><a name="Inheritance">クラス階層</a>（インヘリタンス）</h3>
</div>
<ul style="list-style-type:circle;">
  <li>java.lang.Object
    <ul style="list-style-type:circle;">
      <li>dragon.<a href="#dragon_Example" title="dragon_Example">Example</a></li>
      <li>mvc4jogl.<a href="../Dragon/mvc4jogl/JavaDoc/mvc4jogl/OpenGLController.html" title="mvc4jogl_OpenGLController">OpenGLController</a> (implements java.awt.event.KeyListener, java.awt.event.MouseListener, java.awt.event.MouseMotionListener, java.awt.event.MouseWheelListener, java.awt.event.WindowListener)</li>
      <li>mvc4jogl.<a href="../Dragon/mvc4jogl/JavaDoc/mvc4jogl/OpenGLModel.html" title="mvc4jogl_OpenGLModel">OpenGLModel</a></li>
      <li>mvc4jogl.<a href="../Dragon/mvc4jogl/JavaDoc/mvc4jogl/OpenGLObject.html" title="mvc4jogl_OpenGLObject">OpenGLObject</a>
        <ul style="list-style-type:circle;">
          <li>mvc4jogl.<a href="../Dragon/mvc4jogl/JavaDoc/mvc4jogl/OpenGLCompound.html" title="mvc4jogl_OpenGLCompound">OpenGLCompound</a>
            <ul style="list-style-type:circle;">
              <li>dragon.<a href="#dragon_Dragon" title="dragon_Dragon">Dragon</a></li>
            </ul>
          </li>
          <li>mvc4jogl.<a href="../Dragon/mvc4jogl/JavaDoc/mvc4jogl/OpenGLPolygon.html" title="mvc4jogl_OpenGLPolygon">OpenGLPolygon</a></li>
          <li>mvc4jogl.<a href="../Dragon/mvc4jogl/JavaDoc/mvc4jogl/OpenGLTriangle.html">OpenGLTriangle</a></li>
          <li>mvc4jogl.<a href="../Dragon/mvc4jogl/JavaDoc/mvc4jogl/Teapot.html" title="mvc4jogl_Teapot">Teapot</a></li>
        </ul>
        </li>
      <li>mvc4jogl.<a href="../Dragon/mvc4jogl/JavaDoc/mvc4jogl/OpenGLProjection.html" title="mvc4jogl_OpenGLProjection">OpenGLProjection</a></li>
      <li>mvc4jogl.<a href="../Dragon/mvc4jogl/JavaDoc/mvc4jogl/OpenGLView.html" title="mvc4jogl_OpenGLView">OpenGLView</a> (implements javax.media.opengl.GLEventListener)</li>
    </ul>
  </li>
</ul>
<div class="belt">
<h3><a name="SourceCode">ソースコード</a>（Version 9）</h3>
</div>
<blockquote>
<div class="belt-yellow">
<h4><a name="build_xml">build.xml</a></h4>
</div>
<!-- python -c 'print(",".join([str(x) for x in range(0, 0)]))' -->
<pre class="brush: plain; toolbar: false; first-line: 1; highlight: [6, 8, 40, 52, 57, 117];">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;project name="Dragon" default="all" basedir="."&gt;

    &lt;property name="package" value="dragon" /&gt;
    &lt;property name="mvc4jogl" value="mvc4jogl" /&gt;
    &lt;property name="utility" value="utility" /&gt;
    &lt;property name="packagenames" value="${package},${mvc4jogl},${utility}" /&gt;
    &lt;property name="destdir" value="./Classes" /&gt;
    &lt;property name="docdir" value="./JavaDoc" /&gt;
    &lt;property name="instdir" value="./${ant.project.name}.app/Contents/Resources/Java" /&gt;
    &lt;property name="copyright" value="Copyright 2008-2017 AOKI Atsushi. All Rights Reserved." /&gt;
    &lt;property name="zipname" value="${ant.project.name}_Programming_Process" /&gt;

    &lt;target name="all" depends="jar" description="build all"&gt;
        &lt;exec executable="date" spawn="false" /&gt;
    &lt;/target&gt;

    &lt;target name="prepare" depends="" description="prepare to compile"&gt;
        &lt;mkdir dir="${destdir}" /&gt;
        &lt;exec executable="sh" spawn="false"&gt;
            &lt;arg line=" ./PrepareJavaNativeInterfaceLibraries.sh" /&gt;
        &lt;/exec&gt;
        &lt;exec executable="date" spawn="false" /&gt;
    &lt;/target&gt;

    &lt;target name="compile" depends="prepare" description="compile all sources"&gt;
        &lt;javac
            fork="true"
            srcdir="${basedir}"
            destdir="${destdir}"
            includeAntRuntime="true"
            encoding="UTF-8"
            deprecation="on"
            verbose="false"&gt;
            &lt;compilerarg value="-J-Dfile.encoding=UTF8" /&gt;
            &lt;compilerarg value="-Xlint:all" /&gt;
            &lt;classpath&gt;
                &lt;pathelement location="." /&gt;
                &lt;pathelement location="${mvc4jogl}.jar" /&gt;
                &lt;pathelement location="${utility}.jar" /&gt;
            &lt;/classpath&gt;
        &lt;/javac&gt;
        &lt;exec executable="date" spawn="false" /&gt;
    &lt;/target&gt;

    &lt;target name="jar" depends="compile" description="make jar file"&gt;
        &lt;jar
            jarfile="${package}.jar"
            basedir="${destdir}"
            manifest="${package}.mf"&gt;
            &lt;zipfileset src="${mvc4jogl}.jar" /&gt;
            &lt;zipfileset src="${utility}.jar" /&gt;
        &lt;/jar&gt;
        &lt;jar
            jarfile="${package}-natives-macosx-universal.jar"&gt;
            &lt;zipfileset src="mvc4jogl-natives-macosx-universal.jar" /&gt;
        &lt;/jar&gt;
        &lt;exec executable="date" spawn="false" /&gt;
    &lt;/target&gt;

    &lt;target name="clean" description="cleaning"&gt;
        &lt;delete dir="${destdir}" /&gt;
        &lt;delete file="${package}.jar" /&gt;
        &lt;delete file="${package}-natives-macosx-universal.jar" /&gt;
        &lt;delete dir="${docdir}" /&gt;
        &lt;delete dir="${instdir}" /&gt;
        &lt;delete file="../${zipname}.zip" /&gt;
        &lt;delete&gt;
            &lt;fileset dir="${package}" includes="*.class" /&gt;
        &lt;/delete&gt;
        &lt;delete dir="natives" /&gt;
        &lt;exec executable="date" spawn="false" /&gt;
    &lt;/target&gt;

    &lt;target name="test" depends="all" description="test"&gt;
        &lt;exec executable="java" spawn="false"&gt;
            &lt;arg line="-Dfile.encoding=UTF-8 -Xmx512m -Xss1024k -jar ${package}.jar" /&gt;
        &lt;/exec&gt;
        &lt;exec executable="date" spawn="false" /&gt;
    &lt;/target&gt;

    &lt;target name="install" depends="all" description="install into application"&gt;
        &lt;copy file="${package}.jar" todir="${instdir}" /&gt;
        &lt;copy file="${package}-natives-macosx-universal.jar" todir="${instdir}" /&gt;
        &lt;copy todir="${instdir}/natives"&gt;
            &lt;fileset dir="natives" /&gt;
        &lt;/copy&gt;
        &lt;exec executable="chmod"&gt;
            &lt;arg line="755 ${instdir}/../../MacOS/applet" /&gt;
        &lt;/exec&gt;
        &lt;exec executable="touch"&gt;
            &lt;arg line="${ant.project.name}.app" /&gt;
        &lt;/exec&gt;
        &lt;exec executable="date" spawn="false" /&gt;
    &lt;/target&gt;

    &lt;target name="doc" depends="all" description="make document (javadoc)"&gt;
        &lt;mkdir dir="${docdir}" /&gt;
        &lt;javadoc
            locale="ja_JP"
            sourcepath="${basedir}"
            destdir="${docdir}"
            packagenames="${packagenames}"
            author="true"
            version="true"
            charset="UTF-8"
            encoding="UTF-8"
            docencoding="UTF-8"
            linksource="yes"
            additionalparam="-J-Dfile.encoding=UTF-8"
            access="private"&gt;
            &lt;doctitle&gt;${doc-title}&lt;/doctitle&gt;
            &lt;bottom&gt;${copyright}&lt;/bottom&gt;
            &lt;classpath&gt;
                &lt;pathelement location="." /&gt;
                &lt;pathelement location="${mvc4jogl}.jar" /&gt;
                &lt;pathelement location="${utility}.jar" /&gt;
            &lt;/classpath&gt;
        &lt;/javadoc&gt;
        &lt;exec executable="open"&gt;
            &lt;arg line="${docdir}/index.html" /&gt;
        &lt;/exec&gt;
        &lt;exec executable="date" spawn="false" /&gt;
    &lt;/target&gt;

    &lt;target name="zip" depends="clean" description="make zip file"&gt;
        &lt;delete file="../${zipname}.zip" /&gt;
        &lt;zip destfile="../${zipname}.zip"&gt;
            &lt;zipfileset dir="." prefix="${zipname}" /&gt;
        &lt;/zip&gt;
        &lt;exec executable="date" spawn="false" /&gt;
    &lt;/target&gt;

&lt;/project&gt;
</pre>
</blockquote>
<blockquote>
<div class="belt-yellow">
<h4><a name="PrepareJavaNativeInterfaceLibraries_sh">PrepareJavaNativeInterfaceLibraries.sh</a></h4>
</div>
<!-- python -c 'print(",".join([str(x) for x in range(0, 0)]))' -->
<pre class="brush: plain; toolbar: false; first-line: 1; highlight: [11];">
#!/bin/sh

boolean="none"
for each in `ls -1 ./natives/macosx-universal/*.dylib 2&gt; /dev/null`
do
    boolean="exists"
done

if [ "$boolean" = "none" ]
then
    jar xvf mvc4jogl-natives-macosx-universal.jar
    rm -rf META-INF
    rm -rf jogamp
fi

exit 0
</pre>
</blockquote>
<blockquote>
<div class="belt-blue">
<h4><a name="dragon_Dragon">dragon.Dragon</a><span style="font-size: x-small;">（<a href="version5.html#dragon_Dragon"><span style="color:#0000ff">以前に示したもの</span></a>と同様ゆえに省略）</span></h4>
</div>
<!-- python -c 'print(",".join([str(x) for x in range(0, 0)]))' -->
<pre class="brush: java; toolbar: false; first-line: 1; highlight: [];">
…
</pre>
</blockquote>
<blockquote>
<div class="belt-blue">
<h4><a name="dragon_Example">dragon.Example</a><span style="font-size: x-small;">（<a href="version5.html#dragon_Example"><span style="color:#0000ff">以前に示したもの</span></a>と同様ゆえに省略）</span></h4>
</div>
<!-- python -c 'print(",".join([str(x) for x in range(0, 0)]))' -->
<pre class="brush: java; toolbar: false; first-line: 1; highlight: [];">
…
</pre>
</blockquote>
<div class="belt">
<h3><a name="BuildAndResult">ビルド＆実行結果</a>（Version 9）</h3>
</div>
<p>ではでは、実行してみましょう。その前に、JARファイルが変わりましたので、払拭（wipe）した後、実行（test）してください。結果が上手くいったのならば、これにて完了です。お疲れさまでした。ご苦労さまでした。</p>
<blockquote>
<pre>
$ <span style="color:#ff0000">make wipe test</span>
env LC_ALL=ja_JP.UTF-8 ant clean
Picked up _JAVA_OPTIONS: -Dfile.encoding=UTF-8
Buildfile: /Users/aoki/Developments/Languages/Java/Dragon/Version9/build.xml

clean:
   [delete] Deleting directory /Users/aoki/Developments/Languages/Java/Dragon/Version9/Classes
   [delete] Deleting: /Users/aoki/Developments/Languages/Java/Dragon/Version9/dragon.jar
   [delete] Deleting: /Users/aoki/Developments/Languages/Java/Dragon/Version9/dragon-natives-macosx-universal.jar
   [delete] Deleting directory /Users/aoki/Developments/Languages/Java/Dragon/Version9/natives
     [exec] 2019年 12月27日 金曜日 19時52分12秒 JST

BUILD SUCCESSFUL
Total time: 0 seconds

env LC_ALL=ja_JP.UTF-8 ant test
Picked up _JAVA_OPTIONS: -Dfile.encoding=UTF-8
Buildfile: /Users/aoki/Developments/Languages/Java/Dragon/Version9/build.xml

prepare:
    [mkdir] Created dir: /Users/aoki/Developments/Languages/Java/Dragon/Version9/Classes
     [exec] Picked up _JAVA_OPTIONS: -Dfile.encoding=UTF-8
     [exec]   META-INF/が作成されました
     [exec]  META-INF/MANIFEST.MFが展開されました
     [exec]   jogamp/が作成されました
     [exec]   jogamp/nativetag/が作成されました
     [exec]   jogamp/nativetag/common/が作成されました
     [exec]   jogamp/nativetag/common/macosx/が作成されました
     [exec]   jogamp/nativetag/common/macosx/universal/が作成されました
     [exec]  jogamp/nativetag/common/macosx/universal/TAG.classが展開されました
     [exec]   natives/が作成されました
     [exec]   natives/macosx-universal/が作成されました
     [exec]  natives/macosx-universal/libgluegen-rt.dylibが展開されました
     [exec]   jogamp/nativetag/opengl/が作成されました
     [exec]   jogamp/nativetag/opengl/macosx/が作成されました
     [exec]   jogamp/nativetag/opengl/macosx/universal/が作成されました
     [exec]  jogamp/nativetag/opengl/macosx/universal/TAG.classが展開されました
     [exec]  natives/macosx-universal/libjogl_desktop.dylibが展開されました
     [exec]  natives/macosx-universal/libjogl_mobile.dylibが展開されました
     [exec]  natives/macosx-universal/libnativewindow_awt.dylibが展開されました
     [exec]  natives/macosx-universal/libnativewindow_macosx.dylibが展開されました
     [exec]  natives/macosx-universal/libnewt.dylibが展開されました
     [exec] 2019年 12月27日 金曜日 19時52分15秒 JST

compile:
    [javac] Compiling 2 source files to /Users/aoki/Developments/Languages/Java/Dragon/Version9/Classes
    [javac] Picked up _JAVA_OPTIONS: -Dfile.encoding=UTF-8
     [exec] 2019年 12月27日 金曜日 19時52分16秒 JST

jar:
      [jar] Building jar: /Users/aoki/Developments/Languages/Java/Dragon/Version9/dragon.jar
      [jar] Building jar: /Users/aoki/Developments/Languages/Java/Dragon/Version9/dragon-natives-macosx-universal.jar
     [exec] 2019年 12月27日 金曜日 19時52分17秒 JST

all:
     [exec] 2019年 12月27日 金曜日 19時52分17秒 JST

test:
     [exec] Picked up _JAVA_OPTIONS: -Dfile.encoding=UTF-8
     [exec] 2019年 12月27日 金曜日 19時52分24秒 JST

BUILD SUCCESSFUL
Total time: 10 seconds
$ 
</pre>
</blockquote>
<blockquote><img src="images/version_9_R.jpg" width="402" height="424" alt="version_9_R"></blockquote>
<hr>
<p><a href="version8.html">←</a> <a href="version9.html">↑</a> <a href="index-j.html">→</a></p>
<hr>
<div class="right-small">Updated: 2020/01/04 (Created: 2010/11/11) <a href="http://www.kyoto-su.ac.jp/"><img class="borderless" src="http://www.cc.kyoto-su.ac.jp/~atsushi/thumbnails/KSU.jpg" width="115" height="30" alt="KSU"></a> <a href="http://www.cc.kyoto-su.ac.jp/~atsushi/"><img class="borderless" src="http://www.cc.kyoto-su.ac.jp/~atsushi/thumbnails/AokiHanko.jpg" width="32" height="32" alt="AokiHanko"></a></div>
</body>
</html>
